<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EMIRDas: sdsu_emir_platform.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>sdsu_emir_platform.h</h1><a href="sdsu__emir__platform_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef __SDSU_PLATFORM_H__</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __SDSU_PLATFORM_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="comment">/* Motorolla architectures are big endian (left-to-right) */</span>
<a name="l00005"></a><a class="code" href="sdsu__emir__platform_8h.html#4f03a37f3fe5cf59afb909fda9d07576">00005</a> <span class="preprocessor">#define SDSU_BIG_ENDIAN</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span>
<a name="l00007"></a><a class="code" href="sdsu__emir__platform_8h.html#46ae51c0332e3b6b63013de688f357e0">00007</a> <span class="preprocessor">#define SEM_TIMOUT    ERROR</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span>
<a name="l00009"></a><a class="code" href="sdsu__emir__platform_8h.html#dc2e244e03d35db5a963ef383f06a7ef">00009</a> <span class="preprocessor">#define PCI_CMD_OK    OK</span>
<a name="l00010"></a><a class="code" href="sdsu__emir__platform_8h.html#55425682d229603b3ccd6a84dcec2b03">00010</a> <span class="preprocessor"></span><span class="preprocessor">#define PCI_REPLY_OK  OK</span>
<a name="l00011"></a><a class="code" href="sdsu__emir__platform_8h.html#6bf95d549d350261a69436d744572e05">00011</a> <span class="preprocessor"></span><span class="preprocessor">#define TIME_CMD_OK   OK</span>
<a name="l00012"></a><a class="code" href="sdsu__emir__platform_8h.html#f89981a3fc973143cfce7b32712c68a8">00012</a> <span class="preprocessor"></span><span class="preprocessor">#define TIME_REPLY_OK OK</span>
<a name="l00013"></a><a class="code" href="sdsu__emir__platform_8h.html#342b25b959c3c14cd36bc371a307f23d">00013</a> <span class="preprocessor"></span><span class="preprocessor">#define CON_CMD_OK    OK</span>
<a name="l00014"></a><a class="code" href="sdsu__emir__platform_8h.html#b96f1bc4ccc963485f82cbe928d22a91">00014</a> <span class="preprocessor"></span><span class="preprocessor">#define HST_CMD_OK    OK</span>
<a name="l00015"></a><a class="code" href="sdsu__emir__platform_8h.html#dd10777716eb724e7235e65551aa5cda">00015</a> <span class="preprocessor"></span><span class="preprocessor">#define BUFFER_OK     OK</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a><a class="code" href="sdsu__emir__platform_8h.html#df7c337590bfc04084f95588e8eccfdc">00017</a> <span class="preprocessor">#define SDSU_PCI_TASK  "tSDSU_PCI"</span>
<a name="l00018"></a><a class="code" href="sdsu__emir__platform_8h.html#914d635549236860a92ee8f5b008115d">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define SDSU_TIME_TASK "tSDSU_Time"</span>
<a name="l00019"></a><a class="code" href="sdsu__emir__platform_8h.html#cd52c401cd54865f3b9ca308124946f2">00019</a> <span class="preprocessor"></span><span class="preprocessor">#define SDSU_DATA_TASK "tSDSU_Data"</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span>
<a name="l00021"></a>00021 <span class="comment">/* POSIX semaphore declarations "semPXLib" */</span>
<a name="l00022"></a><a class="code" href="sdsu__emir__platform_8h.html#de4bf28aa09992fa770f684d73213ebe">00022</a> <span class="preprocessor">#define POST_SEM(a)     semGive(a)</span>
<a name="l00023"></a><a class="code" href="sdsu__emir__platform_8h.html#8296184ebdcd4a606fcb05bf5809c520">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define WAIT_SEM(a)     semTake(a, WAIT_FOREVER)</span>
<a name="l00024"></a><a class="code" href="sdsu__emir__platform_8h.html#7363158a2c7a92a42f75a8e051c0916f">00024</a> <span class="preprocessor"></span><span class="preprocessor">#define WAIT_SEM_TIMED(a,b) semTake(a,b*sysClkRateGet())</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a><a class="code" href="sdsu__emir__platform_8h.html#44b3534401c947240f7d13c580560223">00026</a> <span class="preprocessor">#define SIGNAL_FIFO(a) semGive(a);</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span>
<a name="l00028"></a>00028 <span class="comment">/* VxWorks message queue "msgQLib" */</span>
<a name="l00029"></a><a class="code" href="sdsu__emir__platform_8h.html#f462b6da796c46b6515da74680affd94">00029</a> <span class="preprocessor">#define GET_FIFO(a,b,c)     msgQReceive(a.id,b,c,NO_WAIT)</span>
<a name="l00030"></a><a class="code" href="sdsu__emir__platform_8h.html#da88bf09f97cf2c94bee0c12e1dab7fb">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_FIFO(a,b,c)    msgQReceive(a.id,b,c,WAIT_FOREVER)</span>
<a name="l00031"></a><a class="code" href="sdsu__emir__platform_8h.html#154cb2d4f692f5aea7461f6100c2dafe">00031</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_FIFO_TIMED(a,b,c,d) msgQReceive(a.id,b,c,d*sysClkRateGet())</span>
<a name="l00032"></a><a class="code" href="sdsu__emir__platform_8h.html#2c49a36a81624a1f9a1336762c340d7f">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define PUT_FIFO(a,b,c)     msgQSend(a.id,b,c,NO_WAIT,MSG_PRI_NORMAL)</span>
<a name="l00033"></a><a class="code" href="sdsu__emir__platform_8h.html#f81529fad594fdf6ebb1932e398f1d96">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_FIFO(a,b,c)   msgQSend(a.id,b,c,WAIT_FOREVER,MSG_PRI_NORMAL)</span>
<a name="l00034"></a><a class="code" href="sdsu__emir__platform_8h.html#e05fa51cf4f3e794f42ae6a360d10b9a">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_FIFO_TIMED(a,b,c,d) msgQSend(a.id,b,c,d*sysClkRateGet(),MSG_PRI_NORMAL)</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a><a class="code" href="sdsu__emir__platform_8h.html#147bb30a014935e2644222ddb8925947">00036</a> <span class="preprocessor">#define INT_ENABLE(a)       intEnable(a)</span>
<a name="l00037"></a><a class="code" href="sdsu__emir__platform_8h.html#75a54910a9cc39951394f95efa469f7e">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define INT_ENABLE_AGAIN(a) </span><span class="comment">/* intEnable(a) */</span>
<a name="l00038"></a><a class="code" href="sdsu__emir__platform_8h.html#96f5da1ecb2796641d1304bc04e3c382">00038</a> <span class="preprocessor">#define INT_DISABLE(a) </span><span class="comment">/* intDisable(a) */</span>
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="sdsu__emir__platform_8h.html#bf78a7c81314b18ab062d5b8024b46af">00040</a> <span class="preprocessor">#define PCI_READ32(a,b)     {sysPciRead32(a,b); DBGMSG("PCI_READ32&gt; value %#x read from address %#x\n",*(b),a); }</span>
<a name="l00041"></a><a class="code" href="sdsu__emir__platform_8h.html#6bd77d04c47013d4e5fc6321f8e7ae98">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define PCI_WRITE32(a,b)    {sysPciWrite32(a,b);DBGMSG("PCI_WRITE32&gt; value %#x written to address %#x\n",b,a);}</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="comment">/* int printf(const char *fmt); */</span>
<a name="l00044"></a>00044 <span class="comment">/* Macro for printing debug statements to standard output */</span>
<a name="l00045"></a>00045 <span class="preprocessor">#ifdef DEBUG_MESSAGE</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#define DBGMSG(x...) printf(x)</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00048"></a><a class="code" href="sdsu__emir__platform_8h.html#658718d5911e737c0726f2a3dab9cdb0">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define DBGMSG(x...)</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="comment">/* Macro for printing error statements to standard output */</span>
<a name="l00051"></a>00051 <span class="preprocessor">#ifdef ERROR_MESSAGE</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define ERRMSG(x...) printf(x)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00054"></a><a class="code" href="sdsu__emir__platform_8h.html#2f1f0ca9d60ca4d2be923935ee346c9c">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define ERRMSG(x...)</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a><a class="code" href="sdsu__emir__platform_8h.html#14424c9dc95d99fe3bf959e160f4b3bb">00057</a> <span class="preprocessor">#define PHYS2BUSADR(a) (a);</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="comment">/* Using local prototypes as they are missing in VxWorks */</span>
<a name="l00060"></a>00060 IMPORT <span class="keywordtype">void</span> <a class="code" href="sdsu__emir__platform_8h.html#2666c6529cd8218fdf7a13627433f63e">sysPciWrite32</a>(<a class="code" href="DetectorControllerDefs_8h.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>, <a class="code" href="DetectorControllerDefs_8h.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>);
<a name="l00061"></a>00061 IMPORT <span class="keywordtype">void</span> <a class="code" href="sdsu__emir__platform_8h.html#46747a438425f8300769298fbd05d041">sysPciRead32</a>(<a class="code" href="DetectorControllerDefs_8h.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a>, <a class="code" href="DetectorControllerDefs_8h.html#69afa2e50b905f4eab1f2df8a3fd9f23">UINT32</a> *);
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="preprocessor">#endif </span><span class="comment">/* __SDSU_PLATFORM_H__ */</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Fri Dec 20 12:48:05 2013 for EMIRDas by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
